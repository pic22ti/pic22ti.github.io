<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Scroll Basic</title>
  <style>
    .output {
      /* fixed나 float는 display가 inline-block으로 바뀜 */
      position: fixed;
      background-color: rgba(0, 0, 0, 0.4);
      width: 100%;

      color: white;
      font-size: 3rem;
    }
    .content {
      display: flex;
      flex-direction: column;
      align-items: center;

      background-color: paleturquoise;
      height: 3000px;
      padding: 20%;
    }
    .box {
      background-color: palevioletred;
      width: 100px;
      height: 100px;
      margin: 10%;

      transition: 0.5s;
    }
    .box.zoom {
      transform: scale(2);
    }
  </style>
</head>
<body>
  <div class="output">output</div>
  <div class="content">
    <div>
      Lorem, ipsum dolor sit amet consectetur adipisicing elit. At accusamus labore soluta earum optio doloremque atque omnis nihil est corrupti. Et doloremque non quod natus perferendis aliquam corporis sequi ipsa! Lorem ipsum dolor sit amet consectetur adipisicing elit. Odio in quidem dolorem id omnis accusamus possimus sed cum, suscipit ea odit aliquid impedit voluptates est porro tempore. Ut, et quae. Lorem ipsum dolor, sit amet consectetur adipisicing elit. A iure expedita tempora molestiae cupiditate natus officia, quia, quisquam totam praesentium perspiciatis! Officia ab tempore temporibus natus. Dolorum explicabo deleniti veritatis. Lorem ipsum dolor sit amet consectetur, adipisicing elit. Optio rerum necessitatibus impedit quod, magnam iste ex? Dignissimos quas vel, nemo minus enim, at mollitia sapiente sequi tempora voluptate nam voluptas.
    </div>
    <div class="box"></div>
  </div>
  <script>
    (function(){

      const outputElem = document.querySelector('.output');
      const boxElem = document.querySelector('.box');






      /* 윈도우에 스크롤 이벤트 add앞에 window. 생략 가능 */
      window.addEventListener('scroll', function(){
        // console.log('onscroll'); // 스크롤이 되는지 확인
        // console.log( window.onscroll == document.body.onscroll ); //ture

        /* 얼마나 스크롤 했는지 위치를 확인할 때 window.pageYOffset */
        outputElem.innerHTML = window.pageYOffset; // Y축 스크롤이기 때문에 pageYOffset
        /* 스크롤은 맨 밑으로 내려도 전체 바디 height보다 다른 이유는
           스크롤 상단 부분의 위치이기 때문에 뷰포트보다 적은 수이다 */

        console.log(window.innerHeight); // 뷰포트 
        /* window.pageYOffset 맨 밑과 window.innerHeight를 더해도 body height보다 적은 이유는
           위아래 기본으로 설정되어 있는 라인, 여백 등 때문이다. */

        /* top : 0 위치와 요소의 높이 값 (위에서 얼마나 많이 떨어져 있는지) */
        outputElem.innerHTML = boxElem.offsetTop; // 고정 값

        /* 
          요소 속성에 대한 정보 가져오기
          많이 사용되는 메소드********************
          x: 420.5, y: 200.5, width: 100, height: 100, top: 200.5, …
          bottom 밑에서 얼마나 떨어져 있나
          top = y  뷰포트 탑에서 얼마나 떨어져 있나
          left = x 왼쪽에서 얼마나 떨어져 있나
        */
        console.log( boxElem.getBoundingClientRect().y );
        console.log( boxElem.style );

      });








      function myFunc() {
        console.log(window.innerHeight * 0.2);
        console.log(boxElem.getBoundingClientRect().y);

    

        if( (window.innerHeight * 0.2) >= boxElem.getBoundingClientRect().y ) {
          boxElem.style.backgroundColor = 'palegoldenrod';
        }

      }





      function rectScale() {

        let posY = boxElem.getBoundingClientRect().top;
        console.log(posY);

        if( posY < window.innerHeight*0.2 ) {
          // boxElem.classList.add('zoom');
          boxElem.style.transform = 'scale(2)' ;
        }
        else {
          // boxElem.classList.remove('zoom');
          boxElem.style.transform = 'scale(1)' ;

        }

      }







      window.addEventListener('scroll', function(){
        rectScale();
      });







    })();
  </script>
</body>
</html>